## Makefile definitions for github runner with nvhpc compiler

C       = mpic++ --c++11
FORTRAN = mpifort -Mpreprocess
FLINKER = mpifort

DEBUG    = -g -O0 -Mbounds -Mnoopenmp -Ktrap=fp
OPTIMIZE = -g -O2 -tp=pwr9

SUFFIX_f90 =

MDEFS =
PP    = -D

ifeq ($(USE_OMP),TRUE)
  OPENMP = -mp=multicore
else ifeq ($(USE_OMP_OL),TRUE)
  OPENMP = -mp=gpu -gpu=cuda11.7,cc70,ptxinfo -Minfo=accel
endif

ifeq ($(USE_OACC),TRUE)
  OPENACC = -acc -gpu=cuda11.7,cc70,ptxinfo -Minfo=accel
endif

INCLUDE_CUDA     = -I/usr/local/cuda-11.7/include
INCLUDE_HDF5     = -I/usr/include/hdf5/serial
INCLUDE_LAPACK   =
INCLUDE_MAGMA    =
INCLUDE_PETSC    =
INCLUDE_POSEIDON =
INCLUDE_ROCM     =

LIBRARIES_CUDA     = -L/usr/local/cuda11.7/lib64 -lcusparse -lcusolver -lcublas -lcudart -lcuda
LIBRARIES_HDF5     = -L/usr/lib/x86_64-linux-gnu/hdf5/serial/lib -lhdf5_fortran -lhdf5
LIBRARIES_LAPACK   = -L/opt/nvidia/hpc_sdk/Linux_x86_64/22.7/REDIST/compilers/lib -llapack -lblas
LIBRARIES_MAGMA    =
LIBRARIES_PETSC    =
LIBRARIES_POSEIDON =
LIBRARIES_ROCM     =
